DROP TABLE IF EXISTS categorie;CREATE TABLE IF NOT EXISTS categorie (id int NOT NULL,libelle varchar(20) NOT NULL,PRIMARY KEY (id)) ;INSERT INTO categorie (id, libelle) VALUES(1, 'first'),(2, 'nice'),(3, 'good'),(4, 'best');DROP TABLE IF EXISTS chambre;CREATE TABLE IF NOT EXISTS chambre (id SERIAL,nbCouchage int NOT NULL,porte varchar(5) NOT NULL,etage varchar(5) NOT NULL,idCategorie int NOT NULL,baignoire int NOT NULL,prixBase decimal NOT NULL,PRIMARY KEY (id)) ;INSERT INTO chambre (id, nbCouchage, porte, etage, idCategorie, baignoire, prixBase) VALUES(1, 2, 'A', '2', 1, 1, 50),(2, 2, 'A', '2', 1, 1, 50),(3, 2, 'A', '2', 1, 1, 50),(4, 2, 'B', '2', 1, 0, 50),(5, 2, 'A', '2', 1, 1, 50),(6, 2, 'A', '2', 1, 1, 50),(7, 2, 'A', '2', 1, 1, 60),(8, 2, 'A', '2', 1, 1, 55),(9, 2, 'C', '2', 1, 0, 60),(10, 2, 'A', '2', 1, 1, 60),(11, 2, 'A', '2', 1, 1, 60),(12, 2, 'A', '2', 1, 1, 50),(13, 2, 'D', '2', 1, 0, 60),(14, 2, 'A', '2', 1, 0, 60),(15, 2, 'A', '2', 1, 1, 60),(16, 2, 'A', '2', 1, 1, 60),(17, 2, 'A', '2', 1, 1, 60),(18, 2, 'Z', '2', 1, 1, 60),(19, 2, 'N', '2', 1, 1, 60),(20, 2, 'A', '2', 1, 1, 70),(21, 2, 'M', '2', 1, 0, 72),(22, 2, 'K', '2', 1, 1, 75),(23, 2, 'J', '2', 1, 1, 80),(24, 2, 'A', '2', 1, 1, 70),(25, 2, 'H', '2', 1, 1, 80),(26, 2, 'C', '2', 1, 0, 160),(27, 3, 'A', '2', 1, 1, 160),(28, 4, 'R', '2', 1, 1, 145),(29, 3, 'A', '2', 1, 1, 170),(30, 5, 'D', '2', 1, 0, 140),(31, 4, 'G', '2', 1, 0, 130),(32, 3, 'C', '2', 1, 1, 120),(33, 6, 'A', '2', 1, 1, 165),(34, 4, 'E', '2', 1, 1, 170),(35, 2, 'Z', '2', 1, 1, 60),(36, 2, 'N', '2', 1, 1, 60),(37, 2, 'A', '2', 1, 1, 70),(38, 2, 'M', '2', 1, 0, 72),(39, 2, 'K', '2', 1, 1, 75),(40, 2, 'J', '2', 2, 1, 120),(41, 2, 'A', '2', 2, 1, 130),(42, 2, 'H', '2', 2, 1, 110),(43, 2, 'C', '2', 2, 0, 175),(44, 3, 'A', '2', 2, 1, 200),(45, 4, 'R', '2', 2, 1, 180),(46, 3, 'A', '2', 3, 1, 350),(47, 5, 'D', '2', 3, 0, 340),(48, 4, 'G', '2', 3, 0, 320),(49, 3, 'C', '2', 3, 1, 420),(50, 6, 'A', '2', 3, 1, 455),(51, 4, 'E', '2', 3, 1, 430);DROP TABLE IF EXISTS ligne_reservation;CREATE TABLE IF NOT EXISTS ligne_reservation (idchambre int NOT NULL,idreservation int NOT NULL) ;INSERT INTO ligne_reservation (idchambre, idreservation) VALUES(1, 1),(2, 1),(3, 2);DROP TABLE IF EXISTS periode;CREATE TABLE IF NOT EXISTS periode (id int NOT NULL,libelle varchar(20) NOT NULL,coefficient decimal NOT NULL,PRIMARY KEY (id)) ;INSERT INTO periode (id, libelle, coefficient) VALUES(1, 'low', 0.7),(2, 'medium', 1),(3, 'high', 2);DROP TABLE IF EXISTS reservation;CREATE TABLE IF NOT EXISTS reservation (id SERIAL,dateD date NOT NULL,dateF date NOT NULL,idPeriode int NOT NULL,PRIMARY KEY (id)) ;INSERT INTO reservation (id, dateD, dateF, idPeriode) VALUES(1, '2020-03-25', '2020-03-31', 2),(2, '2020-04-09', '2020-04-16', 2);DROP TABLE IF EXISTS utilisateur;CREATE TABLE IF NOT EXISTS utilisateur (id SERIAL,email varchar(60) NOT NULL,nom varchar(30) NOT NULL,prenom varchar(30) NOT NULL,PRIMARY KEY (id)) ;INSERT INTO utilisateur (id, email, nom, prenom) VALUES(1, 'zorg@sio.fr', 'zorg', 'goz');ALTER TABLE chambre ADD CONSTRAINT chambre_ibfk_1 FOREIGN KEY (idCategorie) REFERENCES categorie (id);ALTER TABLE ligne_reservation ADD CONSTRAINT ligne_reservation_ibfk_1 FOREIGN KEY (idchambre) REFERENCES chambre (id),ADD CONSTRAINT ligne_reservation_ibfk_2 FOREIGN KEY (idreservation) REFERENCES reservation (id);ALTER TABLE reservation ADD CONSTRAINT reservation_ibfk_1 FOREIGN KEY (idPeriode) REFERENCES periode (id);COMMIT;
